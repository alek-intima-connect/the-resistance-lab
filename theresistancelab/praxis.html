<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resource Dashboard | The Resistance Lab</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Anton&family=Merriweather:ital,wght@0,300;0,400;0,700;1,300&family=Oswald:wght@400;500;700&display=swap" rel="stylesheet">

    <style>
        /* --- CORE VARIABLES --- */
        :root {
            --bg-paper: #F2F0E6;
            --text-main: #111111;
            --text-muted: #555555;
            --accent: #CD0000;
            --border-thick: 3px solid #111;
            --shadow-hard: 5px 5px 0px #000000;
        }

        /* --- GLOBAL RESET --- */
        * { box-sizing: border-box; }

        body {
            font-family: 'Merriweather', serif;
            background-color: var(--bg-paper);
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.05'/%3E%3C/svg%3E");
            color: var(--text-main);
            margin: 0;
            padding: 0;
            line-height: 1.6;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 5%;
        }

        /* --- TICKER SYSTEM --- */
        .news-ticker {
            width: 100%;
            background: #111;
            color: var(--bg-paper);
            padding: 14px 0;
            overflow: hidden;
            border-bottom: var(--border-thick);
            position: sticky; top: 0; z-index: 100;
        }

        .ticker-wrap { display: flex; width: fit-content; }

        .ticker-content {
            display: flex;
            white-space: nowrap;
            animation: scroll-slow 120s linear infinite;
            font-family: 'Oswald', sans-serif;
            font-size: 0.95rem;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        .news-ticker:hover .ticker-content { animation-play-state: paused; }

        .ticker-item {
            display: flex; align-items: center;
            padding: 0 60px; color: var(--bg-paper); text-decoration: none;
        }

        .ticker-item:hover { color: var(--accent); }
        .source-tag { color: var(--accent); font-weight: 700; margin-right: 12px; }
        .crypto-tag { color: #fff; background: var(--accent); padding: 2px 8px; margin-right: 12px; font-size: 0.75rem; }
        .time-tag { color: #666; font-size: 0.75rem; margin-left: 12px; font-style: italic; }

        @keyframes scroll-slow {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }

        header {
            margin-bottom: 50px;
            border-bottom: var(--border-thick);
            padding-bottom: 40px;
        }
        .breadcrumb {
            font-family: 'Oswald', sans-serif; text-transform: uppercase;
            font-size: 0.9rem; letter-spacing: 2px; color: var(--accent); font-weight: 700;
        }
        h1 {
            font-family: 'Anton', sans-serif; font-size: clamp(3rem, 6vw, 5rem);
            margin: 0; line-height: 1; text-transform: uppercase; letter-spacing: 1px;
        }
        .mission-statement {
            font-size: 1.1rem; max-width: 800px; color: var(--text-main);
            border-left: 4px solid var(--accent); padding-left: 20px; margin-top: 10px;
        }

        /* --- CONTROLS --- */
        .controls-area {
            display: flex; flex-wrap: wrap; gap: 20px; margin-bottom: 40px;
            align-items: center; justify-content: space-between;
        }
        .filter-container { display: flex; gap: 10px; flex-wrap: wrap; }
        .filter-btn {
            background: transparent; border: 2px solid #111; padding: 8px 16px;
            font-family: 'Oswald', sans-serif; font-weight: 700; text-transform: uppercase;
            cursor: pointer; transition: all 0.2s; font-size: 0.9rem;
        }
        .filter-btn:hover, .filter-btn.active {
            background: #111; color: #fff; transform: translate(-2px, -2px);
            box-shadow: 3px 3px 0px var(--accent);
        }
        .search-input {
            width: 300px; padding: 12px; border: 2px solid #111;
            font-family: 'Oswald', sans-serif; font-size: 1rem; background: #fff;
        }
        .search-input:focus { outline: none; box-shadow: 4px 4px 0px var(--accent); }

        /* --- BENTO GRID --- */
        .resource-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            grid-auto-flow: dense; 
            margin-bottom: 80px;
        }

        .resource-card {
            background: #fff; border: var(--border-thick); padding: 25px;
            display: flex; flex-direction: column; justify-content: space-between;
            min-height: 280px; position: relative; transition: all 0.2s ease;
            box-shadow: var(--shadow-hard);
        }
        .resource-card:hover {
            transform: translate(-2px, -2px); box-shadow: 8px 8px 0px var(--accent);
        }

        .card-tag {
            font-family: 'Oswald', sans-serif; font-size: 0.75rem; text-transform: uppercase;
            font-weight: 700; letter-spacing: 1px; color: var(--accent);
            margin-bottom: 10px; border-bottom: 1px solid #eee; padding-bottom: 5px; display: inline-block;
        }
        .card-title {
            font-family: 'Anton', sans-serif; font-size: 1.8rem; margin: 0 0 10px 0; line-height: 1.1;
        }
        .card-desc {
            font-size: 0.95rem; color: var(--text-muted); margin-bottom: 20px; flex-grow: 1;
        }
        .card-link {
            font-family: 'Oswald', sans-serif; text-decoration: none; color: #111;
            font-weight: 700; text-transform: uppercase; border-bottom: 2px solid #111;
            align-self: flex-start; transition: color 0.2s;
        }
        .card-link:hover { color: var(--accent); border-color: var(--accent); }

        /* VARIANTS */
        .card-wide { grid-column: span 2; }
        .card-tool { border-left: 10px solid var(--accent); }
        
        .card-video {
            background-size: cover; background-position: center; border: var(--border-thick);
            color: white; padding: 0; overflow: hidden;
        }
        .card-video::before {
            content: ''; position: absolute; top:0; left:0; right:0; bottom:0;
            background: linear-gradient(0deg, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0) 100%); z-index: 1;
        }
        .card-video .content-wrapper {
            position: absolute; bottom: 0; left: 0; padding: 25px; z-index: 2; width: 100%;
        }
        .play-icon {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            font-size: 4rem; color: var(--accent); z-index: 2; text-shadow: 2px 2px 0px #000;
        }

        .card-stat {
            background: #111; color: #fff; text-align: center; justify-content: center; align-items: center;
        }
        .stat-val { font-family: 'Anton', sans-serif; font-size: 4.5rem; color: var(--accent); line-height: 1; }
        .stat-label { font-family: 'Oswald', sans-serif; text-transform: uppercase; letter-spacing: 2px; color: #888; }

        .btn-dl {
            background: #111; color: #fff; text-decoration: none; font-family: 'Oswald', sans-serif;
            padding: 10px 15px; text-align: center; text-transform: uppercase; letter-spacing: 1px;
            transition: 0.2s;
        }
        .btn-dl:hover { background: var(--accent); }

        /* --- SUBMISSION FORM --- */
        .submission-section {
            background: #fff; border: var(--border-thick); padding: 40px;
            box-shadow: 10px 10px 0px rgba(0,0,0,0.1);
        }
        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .form-group { display: flex; flex-direction: column; }
        .full-width { grid-column: span 2; }
        
        label {
            font-family: 'Oswald', sans-serif; font-weight: 700; text-transform: uppercase;
            font-size: 0.8rem; margin-bottom: 5px; color: var(--text-muted);
        }
        input, select, textarea {
            padding: 15px; border: 2px solid #111; background: #f9f9f9;
            font-family: 'Oswald', sans-serif; font-size: 1rem;
        }
        input:focus, select:focus, textarea:focus {
            outline: none; background: #fff; box-shadow: 5px 5px 0px var(--accent);
        }
        .btn-submit {
            background: #111; color: #fff; border: none; padding: 15px;
            font-family: 'Anton', sans-serif; font-size: 1.2rem; text-transform: uppercase;
            cursor: pointer; transition: 0.2s; letter-spacing: 1px;
        }
        .btn-submit:hover { background: var(--accent); transform: translate(-2px, -2px); box-shadow: 4px 4px 0px #000; }

        /* Bookmark Icon Style */
        .save-btn {
            position: absolute; top: 15px; right: 15px;
            font-size: 1.5rem; color: #ccc; cursor: pointer; z-index: 10;
            transition: color 0.2s; user-select: none;
        }
        .save-btn:hover { color: #666; }
        .save-btn.saved { color: var(--accent); text-shadow: 0 0 5px rgba(205,0,0,0.5); }

        /* --- GLITCH EFFECT --- */
        @keyframes glitch-anim {
            0% { text-shadow: 2px 0 #CD0000, -2px 0 #00E5FF; }
            25% { text-shadow: -2px 2px #CD0000, 2px -2px #00E5FF; }
            50% { text-shadow: 2px -2px #CD0000, -2px 2px #00E5FF; }
            75% { text-shadow: -2px 0 #CD0000, 2px 0 #00E5FF; }
            100% { text-shadow: 2px 0 #CD0000, -2px 0 #00E5FF; }
        }
        .glitch-hover:hover {
            animation: glitch-anim 0.3s infinite;
            color: #fff; background: #111; transform: translate(1px, 1px); 
        }

        /* --- SCROLLBAR --- */
        ::-webkit-scrollbar { width: 12px; }
        ::-webkit-scrollbar-track { background: #111; border-left: 1px solid #333; }
        ::-webkit-scrollbar-thumb { background: #CD0000; border: 2px solid #111; }
        ::-webkit-scrollbar-thumb:hover { background: #fff; }

        /* --- SUBSTACK CARD --- */
        .card {
            width: 100%; max-width: 350px; padding: 20px;
            background: #fff; border: 6px solid #000; box-shadow: 12px 12px 0 #000;
            transition: transform 0.3s, box-shadow 0.3s; margin: 0 auto;
        }
        .card:hover { transform: translate(-5px, -5px); box-shadow: 17px 17px 0 #CD0000; }
        .card__title {
            font-family: 'Anton', sans-serif; font-size: 32px; font-weight: 900;
            color: #000; text-transform: uppercase; margin-bottom: 15px; display: block;
        }
        .card__content {
            font-family: 'Merriweather', serif; font-size: 16px; line-height: 1.4; color: #000; margin-bottom: 20px;
        }
        .card__form { display: flex; flex-direction: column; gap: 15px; }
        .card__form input { padding: 10px; border: 3px solid #000; background: #f4f4f4; }
        .card__button {
            border: 3px solid #000; background: #000; color: #fff; padding: 10px;
            font-family: 'Oswald', sans-serif; font-size: 18px; font-weight: bold;
            text-transform: uppercase; cursor: pointer; width: 100%;
        }
        .card__button:hover { background: #CD0000; border-color: #CD0000; }

        /* --- POPUP --- */
        .resistance-popup {
            position: fixed; bottom: 20px; right: 20px; width: 340px;
            background-color: #ffff00; border: 5px solid #000; box-shadow: 12px 12px 0 #000;
            font-family: 'Courier New', monospace; z-index: 9999;
            display: flex; flex-direction: column; transition: all 0.3s ease;
        }
        .popup-header {
            background-color: #000; color: #ffff00; padding: 0.8rem; font-weight: 900;
            display: flex; justify-content: space-between; align-items: center;
        }
        .close-btn { background: none; border: none; color: #ffff00; font-size: 1.5rem; cursor: pointer; }
        .popup-content { padding: 1.2rem; color: #000; }
        .headline { font-size: 1.4rem; font-weight: 900; margin-bottom: 0.5rem; text-transform: uppercase; }
        .subtext { font-weight: 700; font-size: 1rem; border-bottom: 3px solid #000; padding-bottom: 1rem; margin-bottom: 1rem; }
        .expanded-content {
            max-height: 0; overflow: hidden; transition: max-height 0.4s ease-out;
            font-size: 0.9rem; font-weight: 600; border-left: 4px solid #000; padding-left: 10px;
        }
        .resistance-popup.is-expanded .expanded-content { max-height: 300px; margin: 1rem 0; }
        .action-group { display: flex; gap: 10px; }
        .btn {
            flex: 1; padding: 12px 5px; border: 3px solid #000; text-transform: uppercase;
            font-weight: 900; font-size: 0.85rem; cursor: pointer; text-align: center;
            background: #fff; color: #000; text-decoration: none; box-shadow: 4px 4px 0 #000;
        }
        .btn-primary { background-color: #000; color: #fff; }

        /* --- MOBILE MENU & RESPONSIVE --- */
        #mobile-menu {
            transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            max-height: 0; overflow: hidden; background: var(--bg-paper);
            display: flex; flex-direction: column;
        }
        #mobile-menu.open { max-height: 300px; border-bottom: var(--border-thick); }
        .mobile-nav-link {
            padding: 20px; text-align: center; text-decoration: none; color: var(--text-main);
            font-family: 'Oswald', sans-serif; font-weight: 700; text-transform: uppercase;
            border-top: 1px solid rgba(0,0,0,0.1);
        }
        .mobile-nav-link:hover { background: var(--accent); color: #fff !important; }
        
        .nav-link {
            text-decoration: none; color: var(--text-main); font-size: 0.9rem;
            transition: all 0.2s ease; border-bottom: 4px solid transparent; padding-bottom: 4px;
        }
        .nav-link:hover { color: var(--accent) !important; border-bottom: 4px solid var(--accent); }

        @media (min-width: 769px) {
            .md-only-btn { display: none !important; }
        }

        /* --- FOOTER STYLES (Vanilla CSS Fix) --- */
        footer {
            background: #111827;
            color: #e0e0e0;
            padding: 5px 0;
            border-top: 4px solid var(--accent);
            margin-top: 20px;
        }
        .footer-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .footer-brand h3 {
            font-family: 'Anton', sans-serif;
            font-size: 2rem;
            text-transform: uppercase;
            margin: 0;
            line-height: 1;
            letter-spacing: 1px;
        }
        .footer-brand p {
            font-family: 'Merriweather', serif;
            font-style: italic;
            color: #888;
            margin: 5px 0 0 0;
            font-size: 0.9rem;
        }
        .footer-right {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
        }
        .footer-links {
            display: flex;
            gap: 30px;
            margin-bottom: 15px;
        }
        .footer-link {
            color: #e0e0e0;
            text-decoration: none;
            font-family: 'Oswald', sans-serif;
            font-weight: 700;
            text-transform: uppercase;
            font-size: 0.9rem;
            letter-spacing: 1px;
            transition: color 0.2s;
        }
        .footer-link:hover { color: var(--accent); text-decoration: underline; text-decoration-thickness: 2px; text-underline-offset: 4px; }
        .status-badge {
            display: inline-block;
            border: 1px solid var(--accent);
            color: var(--accent);
            background: rgba(0,0,0,0.3);
            padding: 5px 10px;
            font-family: 'Anton', sans-serif;
            font-size: 0.75rem;
            letter-spacing: 1px;
            box-shadow: 3px 3px 0px rgba(205,0,0,0.2);
        }

        /* --- MOBILE OPTIMIZATIONS --- */
        @media (max-width: 768px) {
            .hidden-on-mobile { display: none !important; }
            .md-only-btn { display: block !important; }
            .resource-grid { grid-template-columns: 1fr; gap: 15px; }
            .card-wide { grid-column: span 1 !important; }
            .form-grid { grid-template-columns: 1fr; }
            .full-width { grid-column: span 1; }
            .controls-area { flex-direction: column; align-items: stretch; }
            .search-input { width: 100%; }
            
            /* Ticker un-stick on mobile to save screen space */
            .news-ticker { position: relative; font-size: 0.8rem; }
            
            /* Increase tap targets */
            .save-btn { padding: 15px; top: 0; right: 0; }
            
            /* Center Popup on Mobile */
            .resistance-popup {
                width: 90%; left: 5%; bottom: 10px; right: auto;
            }
            
            /* Adjust Heading size */
            h1 { font-size: 2.8rem !important; word-wrap: break-word; }

            /* Footer Mobile */
            .footer-content { flex-direction: column; text-align: center; gap: 30px; }
            .footer-right { align-items: center; }
            .footer-links { justify-content: center; }
        }

        /* --- DARK MODE --- */
        body.dark-mode {
            --bg-paper: #0a0a0a; --text-main: #E0E0E0; --text-muted: #888888;
            --border-thick: 3px solid #E0E0E0; --shadow-hard: 5px 5px 0px #333;
        }
        body.dark-mode .resource-card, body.dark-mode .submission-section, body.dark-mode .card {
            background: #151515; border-color: var(--text-main);
        }
        body.dark-mode .news-ticker { background: var(--accent); color: #fff; border-bottom: 3px solid #fff; }
        body.dark-mode .nav-logo svg { stroke: #E0E0E0; }
        body.dark-mode .search-input, body.dark-mode input, body.dark-mode select, body.dark-mode textarea {
            background: #222; color: #fff; border-color: #555;
        }
        body.dark-mode .filter-btn { border-color: #E0E0E0; color: #E0E0E0; }
        body.dark-mode .filter-btn:hover, body.dark-mode .filter-btn.active {
            background: #E0E0E0; color: #000; box-shadow: 3px 3px 0px var(--accent);
        }
        body.dark-mode .card-link { color: #E0E0E0; border-color: #E0E0E0; }
        body.dark-mode .card-link:hover { color: var(--accent); border-color: var(--accent); }
    </style>
</head>
<body>

    <div class="resistance-popup" id="strikePopup">
        <div class="popup-header">
            <span>// SYSTEM ALERT //</span>
            <button class="close-btn" onclick="closePopup()">×</button>
        </div>
        <div class="popup-content">
            <div class="headline">JOIN THE STRIKE</div>
            <div class="subtext">
                JAN 29 2026<br>
                NO WORK. NO SCHOOL.<br>
                NO SHOPPING.
            </div>
            <div class="expanded-content">
                <p>The system relies on your participation. Today, we withdraw it.</p>
                <p><strong>Directives:</strong></p>
                <ul style="margin: 0; padding-left: 15px;">
                    <li>Freeze all transactions.</li>
                    <li>Gather at local community hubs.</li>
                    <li>Do not engage with corporate media.</li>
                </ul>
            </div>
            <div class="action-group">
                <button class="btn" onclick="toggleExpand()" id="expandBtn">Read Briefing</button>
                <a href="https://workerorganizing.org/the-power-of-the-strike-15194/" class="btn btn-primary">Why We Strike</a>
            </div>
        </div>
    </div>

    <nav style="background: var(--bg-paper); border-bottom: var(--border-thick); position: sticky; top: 0; z-index: 1000; padding: 15px 5%;">
        <div style="display: flex; justify-content: space-between; align-items: center; max-width: 1400px; margin: 0 auto;">
            <a href="index.html" style="text-decoration: none; color: var(--text-main); display: flex; align-items: center; gap: 10px;">
                <svg width="32" height="32" viewBox="0 0 100 100" fill="none" stroke="var(--accent)" stroke-width="8">
                    <polygon points="50,5 61,35 95,35 68,55 79,85 50,65 21,85 32,55 5,35 39,35" stroke-linejoin="round"/>
                </svg>
                <span style="font-family: 'Anton', sans-serif; font-size: 1.5rem; text-transform: uppercase;">The Resistance Lab</span>
            </a>

            <div class="hidden-on-mobile" style="display: flex; gap: 25px; font-family: 'Oswald', sans-serif; font-weight: 700; text-transform: uppercase;">
                <a href="canon/canon.html" class="nav-link">The Canon</a>
                <a href="reclamation.html" class="nav-link">Mutual Aid</a>
                <a href="praxis.html" class="nav-link">United Front</a>
            </div>

            <button onclick="toggleMenu()" class="md-only-btn" style="background:none; border:none; cursor:pointer;">
                <div style="width:25px; height:3px; background:currentColor; margin:4px 0;"></div>
                <div style="width:25px; height:3px; background:currentColor; margin:4px 0;"></div>
                <div style="width:25px; height:3px; background:currentColor; margin:4px 0;"></div>
            </button>
        </div>

        <div id="mobile-menu">
            <a href="canon/canon.html" class="mobile-nav-link">The Canon</a>
            <a href="reclamation.html" class="mobile-nav-link">Mutual Aid</a>
            <a href="praxis.html" class="mobile-nav-link">United Front</a>
        </div>
    </nav>

    <div class="news-ticker">
        <div class="ticker-wrap">
            <div class="ticker-content" id="ticker-stream">
                <span class="ticker-item">/// NETWORK SYNC COMPLETE /// ACTIVATING /// STANDBY ///</span>
            </div>
            <div class="ticker-content" id="ticker-stream-clone"></div>
        </div>
    </div>

    <header class="container" style="border-bottom: var(--border-thick); padding-bottom: 40px; margin-top: 20px;">
        <div class="breadcrumb">Resource Dashboard / The Resistance Lab</div>
        <h1 class="glitch-hover">Access. Educate. Liberate.</h1>
        <div class="mission-statement">
            We are transitioning from the Old World to the New. This is the central repository for tools, maps, and protocols necessary for an effective resistance. 
        </div>
    </header>

    <div class="container">
        <div class="controls-area">
            <div class="filter-container">
                <button class="filter-btn active" data-filter="all">All Systems</button>
                <button class="filter-btn" data-filter="Toolkit">Toolkits</button>
                <button class="filter-btn" data-filter="Intel">Intel</button>
                <button class="filter-btn" data-filter="Hardware">Hardware</button>
                <button class="filter-btn" data-filter="Health">Bio/Health</button>
            </div>
            <div class="search-bar">
                <input type="text" class="search-input" id="searchInput" placeholder="SEARCH DATABASE...">
            </div>
            <button class="filter-btn" id="themeToggle" onclick="toggleTheme()" style="display: flex; align-items: center; gap: 8px;">
                <span id="themeIcon">☾</span> 
                <span>MODE</span>
            </button>
        </div>
        
        <div class="resource-grid">
            
            <div class="resource-card card-wide" style="border-left: 10px solid #CD0000;">
                <div class="save-btn" onclick="toggleSave(this, 'riot-med')">★</div>
                <div>
                    <span class="card-tag">Manual / Essential</span>
                    <h2 class="card-title">Riot Medicine</h2>
                    <p class="card-desc">Advanced street medic protocols for high-conflict zones. From chemical exposure to trauma care.</p>
                </div>
                <div style="display:flex; gap:15px; margin-top:15px;">
                    <a href="https://riotmedicine.net/downloads" target="_blank" class="btn-dl">Get PDF</a>
                    <a href="https://riotmedicine.net/" target="_blank" class="card-link" style="align-self:center;">Full Archive &rarr;</a>
                </div>
            </div>
            
            <div class="card">
                <span class="card__title">The Lab Letters</span>
                <p class="card__content">
                Current day geopolitical issues and how we can leverage this for our collective advantage.
                </p>
                <form class="card__form" action="https://theresistancelab.substack.com/subscribe" method="get" target="_blank">
                <input required type="email" name="email" placeholder="ENTER EMAIL" />
                <button class="card__button">INITIATE UPLINK</button>
                </form>
            </div>
            
            <div class="resource-card" style="border-bottom: 8px solid #FFD700;">
                <div>
                    <span class="card-tag">Hardware / Energy</span>
                    <h2 class="card-title">Low-Tech Magazine</h2>
                    <p class="card-desc">Decentralized, solar-powered web hosting and high-tech solutions for a low-tech world.</p>
                </div>
                <a href="https://solar.lowtechmagazine.com/" target="_blank" class="card-link">View Blueprints &rarr;</a>
            </div>
            
            <div class="resource-card card-wide" style="background: #f4f4f4;">
                <div>
                    <span class="card-tag" style="color: var(--accent);">Restricted Access</span>
                    <h2 class="card-title">Anna’s Archive</h2>
                    <p class="card-desc">The largest shadow library in human history. Millions of books and papers. Knowledge is a human right.</p>
                </div>
                <a href="https://annas-archive.li/" target="_blank" class="card-link" style="color: var(--accent); border-color: var(--accent);">Enter Library &rarr;</a>
            </div>
            
            <div class="resource-card">
                <div class="save-btn" onclick="toggleSave(this, 'phr-chem')">★</div>
                <div>
                    <span class="card-tag">Protocol / Chem</span>
                    <h2 class="card-title">Physicians for Human Rights</h2>
                    <p class="card-desc">Preparing for, Protecting Against, and Treating Tear Gas and Other Chemical Irritant Exposure.</p>
                </div>
                <a href="https://phr.org/our-work/resources/preparing-for-protecting-against-and-treating-tear-gas-and-other-chemical-irritant-exposure-a-protesters-guide/" target="_blank" class="card-link">View Protocols &rarr;</a>
            </div>

            <div class="resource-card card-video" style="background-image: url('https://images.unsplash.com/photo-1555862103-6c7225105f27?auto=format&fit=crop&w=800&q=80');">
                <div class="play-icon">▶</div>
                <div class="content-wrapper">
                    <span class="card-tag" style="color: #fff; border-color: #555;">Video Course</span>
                    <h2 class="card-title">Bridge Training</h2>
                    <p style="color: #ccc; font-size: 0.9rem;">Do No Harm Coalition • For RNs/EMTs transitioning to street ops.</p>
                </div>
                <a href="https://www.donoharmcoalition.org/street-medic-training.html" target="_blank" style="position:absolute; top:0; left:0; width:100%; height:100%; z-index:5;"></a>
            </div>

            <div class="resource-card" style="background: linear-gradient(135deg, #FFF8E1 0%, #F2F0E6 100%);">
                <div class="save-btn" onclick="toggleSave(this, 'sumerian')">★</div>
                <div>
                    <span class="card-tag" style="color: #5D4037;">History / Bio-Fuel</span>
                    <h2 class="card-title" style="font-family: 'Georgia', serif; font-style: italic;">Sumerian Survival</h2>
                    <p class="card-desc" style="color: #5D4037;">Archaeological data on 5,000-year-old sustainable agriculture. Low-water, high-output ancient nutrition.</p>
                </div>
                <a href="https://www.laphamsquarterly.org/roundtable/ancient-mesopotamian-tablet-cookbook" target="_blank" class="card-link" style="color: #5D4037; border-color: #5D4037;">Get Recipes &rarr;</a>
            </div>

            <div class="resource-card">
                <div>
                    <span class="card-tag">Intel</span>
                    <h2 class="card-title">Green & Black Cross</h2>
                    <p class="card-desc">UK-based intel on how medical aid intersects with state surveillance and arrest risks.</p>
                </div>
                <a href="https://greenandblackcross.org/guides/" target="_blank" class="card-link">Read Intel &rarr;</a>
            </div>
            
            <div class="resource-card card-wide" style="border-right: 12px solid var(--accent);">
                <div class="save-btn" onclick="toggleSave(this, 'hk-intel')">★</div>
                <div>
                    <span class="card-tag">Intel / Urban Warfare</span>
                    <h2 class="card-title">The Battle of Hong Kong</h2>
                    <p class="card-desc">Major Lester Ferenzi’s analysis of the 2019 protests as a blueprint for 21st-century resistance.</p>
                </div>
                <div style="display:flex; gap:15px; margin-top:15px;">
                    <a href="https://www.armyupress.army.mil/Portals/7/military-review/Archives/English/SO-21/ferenzi-battle-hong-kong.pdf" target="_blank" rel="noopener" class="btn-dl">Download Analysis</a>
                    <a href="https://www.armyupress.army.mil/Books/Large-Scale-Combat-Operations-Book-Set/" target="_blank" class="card-link" style="align-self:center;">Army University Press &rarr;</a>
                </div>
            </div>

            <div class="resource-card" data-category="Health">
                <div class="save-btn" onclick="toggleSave(this, 'crisis-kit')">★</div>
                <div>
                    <span class="card-tag">Health / Mind</span>
                    <h2 class="card-title">Crisis Toolkit</h2>
                    <p class="card-desc">Mental health support designed for organizers and activists facing high-stress surveillance states.</p>
                </div>
                <a href="https://fireweedcollective.org/crisis-toolkit/" target="_blank" class="card-link">Access Care &rarr;</a>
            </div>

            <div class="resource-card">
                <div>
                    <span class="card-tag">Protocol / Medic</span>
                    <h2 class="card-title">Chicago Action Medical</h2>
                    <p class="card-desc">STREET MEDIC HANDBOOK</p>
                </div>
                <a href="https://mutualaiddisasterrelief.org/wp-content/uploads/2020/04/kupdf.net_street-medic-handbook.pdf" target="_blank" class="card-link">Enter Site &rarr;</a>
            </div>

            <div class="resource-card">
                <div class="save-btn" onclick="toggleSave(this, 'monero')">★</div>
                <div>
                    <span class="card-tag">Sovereignty / Econ</span>
                    <h2 class="card-title">The New Economy</h2>
                    <p class="card-desc">Financial sovereignty via Monero and the Cypherpunk ethos. Learn to operate outside the fiat cage.</p>
                </div>
                <a href="https://www.activism.net/cypherpunk/" target="_blank" class="card-link">Read Manifesto &rarr;</a>
            </div>

            <div class="resource-card card-wide">
                <div>
                    <span class="card-tag">Journalism / Intel</span>
                    <h2 class="card-title">Rest of World</h2>
                    <p class="card-desc">Reporting on the "New World" of tech in places like Nepal, Lagos, and Seoul. See the future before it hits the West.</p>
                </div>
                <a href="https://restofworld.org" target="_blank" class="card-link">Access Intel &rarr;</a>
            </div>

            <div class="resource-card">
                <div class="save-btn" onclick="toggleSave(this, 'united-front')">★</div>
                <div>
                    <span class="card-tag">Community</span>
                    <h2 class="card-title">United Front</h2>
                    <p class="card-desc">A global directory of mutual aid networks and hacker spaces from Tallinn to Tokyo.</p>
                </div>
                <a href="https://www.mutualaidhub.org/" target="_blank" class="card-link">Find Your Cell &rarr;</a>
            </div>

            <div class="resource-card">
                <div>
                    <span class="card-tag">Hardware / Comms</span>
                    <h2 class="card-title">Global WebSDR</h2>
                    <p class="card-desc">Listen to shortwave radio frequencies globally via the browser. Monitor traffic without a physical radio.</p>
                </div>
                <a href="http://websdr.org/" target="_blank" class="card-link">Tune Frequency &rarr;</a>
            </div>

            <div class="resource-card card-tool">
                <div class="save-btn" onclick="toggleSave(this, 'ollama')">★</div>
                <div>
                    <span class="card-tag">AI / Sovereign</span>
                    <h2 class="card-title">Ollama</h2>
                    <p class="card-desc">Run Large Language Models locally. No censorship, no data tracking.</p>
                </div>
                <a href="https://ollama.com/" target="_blank" class="btn-dl">Get AI</a>
            </div>

            <div class="resource-card">
                <div>
                    <span class="card-tag">OS / Privacy</span>
                    <h2 class="card-title">Tails OS</h2>
                    <p class="card-desc">The Amnesic Incognito Live System. Runs from USB. Leaves no trace.</p>
                </div>
                <a href="https://tails.boum.org/" target="_blank" class="card-link">Download IMG &rarr;</a>
            </div>

            <div class="resource-card card-tool">
                <div>
                    <span class="card-tag">Toolkit / Repair</span>
                    <h2 class="card-title">Repair Manifesto</h2>
                    <p class="card-desc">Don't replace it. Fix it. Schematics and guides for every piece of tech you own.</p>
                </div>
                <a href="https://www.ifixit.com/Right-to-Repair" target="_blank" class="btn-dl">Get Manuals</a>
            </div>

            <div class="resource-card">
                <div>
                    <span class="card-tag">Bio-Hacking</span>
                    <h2 class="card-title">Huberman Lab</h2>
                    <p class="card-desc">Scientific protocols for dopamine, sleep, and focus control.</p>
                </div>
                <a href="https://www.hubermanlab.com/" target="_blank" class="card-link">View Protocol &rarr;</a>
            </div>

            <div class="resource-card">
                <div>
                    <span class="card-tag">Comms / Protocol</span>
                    <h2 class="card-title">Nostr</h2>
                    <p class="card-desc">Censorship-resistant global social network. You own your keys.</p>
                </div>
                <a href="https://nostr.com/" target="_blank" class="card-link">Generate Keys &rarr;</a>
            </div>
            
            <div class="resource-card card-wide">
                <div class="save-btn" onclick="toggleSave(this, 'kiwix')">★</div>
                <div>
                    <span class="card-tag">Toolkit / Offline / Hardware</span>
                    <h2 class="card-title">Kiwix: The Internet via USB</h2>
                    <p class="card-desc">Download the entire Wikipedia, StackExchange, and WikiHow for offline access when the grid fails.</p>
                </div>
                <a href="https://library.kiwix.org/#lang=eng" target="_blank" class="btn-dl" style="background:var(--accent);">Download ZIM Files</a>
            </div>

            <div class="resource-card">
                <div>
                    <span class="card-tag">Hardware</span>
                    <h2 class="card-title">Meshtastic</h2>
                    <p class="card-desc">Off-grid LoRa communication network. No cell towers required.</p>
                </div>
                <a href="https://meshtastic.org/" target="_blank" class="card-link">View Docs &rarr;</a>
            </div>

            <div class="resource-card card-tool">
                <div class="save-btn" onclick="toggleSave(this, 'privacy-guides')">★</div>
                <div>
                    <span class="card-tag">Toolkit / OpSec</span>
                    <h2 class="card-title">Privacy Guides</h2>
                    <h2 class="card-title" style="font-size: 1.2rem; color: var(--accent);">THREAT MODELING 101</h2>
                    <p class="card-desc">The industry standard for restoring your online privacy. Hardening your OS.</p>
                </div>
                <a href="https://www.privacyguides.org/en/" target="_blank" class="btn-dl">Access Protocols</a>
            </div>

            <div class="resource-card card-stat">
                <div>
                    <div class="stat-label">Network Growth</div>
                    <div class="stat-val">42%</div>
                    <p style="color: #666; font-size: 0.8rem; margin:0;">Since Last Cycle</p>
                </div>
            </div>

            <div class="resource-card" style="background: #111; color: #fff;">
                <div>
                    <span class="card-tag" style="color: var(--accent); border-color: #333;">Support</span>
                    <h2 class="card-title">Fuel the Mission</h2>
                    <p class="card-desc" style="color: #888;">We operate outside traditional banking.</p>
                    <div style="background:#222; padding:10px; border:1px solid #333; font-family:monospace; font-size:0.8rem; cursor:pointer;" onclick="copyWallet(this)">
                        <span class="copy-text">0x71C...9A23 (CLICK TO COPY)</span>
                    </div>
                </div>
            </div>

        </div> 
        
        <div class="submission-section">
            <div class="form-header">
                <h2>Contribute to the Archive</h2>
                <p style="color: var(--text-muted);">The archive is living. Submit a tool, article, or resource for verification.</p>
            </div>
            <form class="form-grid" id="resourceForm">
                <div class="form-group">
                    <label>Resource Title</label>
                    <input type="text" name="title" placeholder="e.g. Open Source Seeds" required>
                </div>
                <div class="form-group">
                    <label>Category</label>
                    <select name="category">
                        <option>Select Category...</option>
                        <option>Toolkit</option>
                        <option>Intel</option>
                        <option>Hardware</option>
                        <option>Health</option>
                    </select>
                </div>
                <div class="form-group full-width">
                    <label>Source URL</label>
                    <input type="url" name="url" placeholder="https://..." required>
                </div>
                <div class="form-group full-width">
                    <label>Why is this necessary?</label>
                    <textarea name="reason" rows="4" placeholder="Briefly explain the utility..."></textarea>
                </div>
                <div class="form-group full-width">
                    <button type="submit" class="btn-submit">Submit Contribution</button>
                </div>
            </form>
        </div>

    </div>

    <footer>
        <div class="container footer-content">
            <div class="footer-brand">
                <h3>The Resistance Lab</h3>
                <p>Novum Mundum Vetere Pasce</p>
            </div>
            <div class="footer-right">
                <div class="footer-links">
                    <a href="#" class="footer-link">Source Code</a>
                    <a href="#" class="footer-link">Doctrine_v1.pdf</a>
                </div>
                <span class="status-badge">EST. 2026 // DECENTRALIZED</span>
            </div>
        </div>
    </footer>

<script>
    // 0. GLOBAL SELECTORS
    const filterBtns = document.querySelectorAll('.filter-btn');
    const searchInput = document.getElementById('searchInput');

    // 1. POPUP LOGIC
    function toggleExpand() {
        const popup = document.getElementById('strikePopup');
        const btn = document.getElementById('expandBtn');
        popup.classList.toggle('is-expanded');
        btn.innerText = popup.classList.contains('is-expanded') ? "Close Briefing" : "Read Briefing";
    }
    
    function toggleMenu() {
        const menu = document.getElementById('mobile-menu');
        menu.classList.toggle('open');
    }

    function closePopup() {
        document.getElementById('strikePopup').style.display = 'none';
        sessionStorage.setItem('strikePopupClosed', 'true');
    }

    // 2. TICKER LOGIC
    async function updateResistanceTicker() {
        const stream = document.getElementById('ticker-stream');
        const clone = document.getElementById('ticker-stream-clone');
        // SECURITY NOTE: Move key to backend for production
        const newsUrl = 'https://newsapi.org/v2/top-headlines?category=technology&language=en&apiKey=a83cbaa7e4d14e18bb80c81d6f51e68a';
        const proxy = 'https://api.allorigins.win/get?url=' + encodeURIComponent(newsUrl);

        try {
            const cryptoRes = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum&vs_currencies=usd');
            const cryptoData = await cryptoRes.json();
            const btc = Math.floor(cryptoData.bitcoin.usd).toLocaleString();
            const eth = Math.floor(cryptoData.ethereum.usd).toLocaleString();

            const response = await fetch(proxy);
            const json = await response.json();
            const newsData = JSON.parse(json.contents);

            let contentHtml = `
                <a href="https://pro.kraken.com/app/trade/btcusd" target="_blank" class="ticker-item"><span class="crypto-tag">BTC</span> $${btc}</a>
                <a href="https://pro.kraken.com/app/trade/ethusd" target="_blank" class="ticker-item"><span class="crypto-tag">ETH</span> $${eth}</a>
            `;

            if (newsData.articles) {
                contentHtml += newsData.articles.slice(0, 10).map(article => {
                    const time = formatTime(article.publishedAt);
                    const source = article.source.name.toUpperCase();
                    const cleanTitle = article.title.split(' - ')[0].trim().toUpperCase();
                    return `<a href="${article.url}" target="_blank" class="ticker-item">
                                <span class="source-tag">[${source}]</span> 
                                ${cleanTitle} 
                                <span class="time-tag">T-${time}</span>
                            </a>`;
                }).join('');
            }

            stream.innerHTML = contentHtml;
            clone.innerHTML = contentHtml;
        } catch (error) {
            const err = `<div class="ticker-item">/// DATA LINK UNSTABLE /// RE-ROUTING SIGNAL... ///</div>`;
            stream.innerHTML = err;
            clone.innerHTML = err;
        }
    }

    function formatTime(isoString) {
        const date = new Date(isoString);
        const now = new Date();
        const diffInMinutes = Math.floor((now - date) / 60000);
        if (diffInMinutes < 60) return `${diffInMinutes}M`;
        return `${Math.floor(diffInMinutes / 60)}H`;
    }

    // 3. THEME & UI
    function toggleTheme() {
        const isDark = document.body.classList.toggle('dark-mode');
        localStorage.setItem('theme', isDark ? 'dark' : 'light');
        document.getElementById('themeIcon').innerText = isDark ? "☀" : "☾";
    }

    function copyWallet(element) {
        navigator.clipboard.writeText("0x71C7656EC7ab88b098defB751B7401B5f6d89A23");
        const span = element.querySelector('.copy-text');
        const originalText = span.innerText;
        span.innerText = "COPIED!";
        setTimeout(() => { span.innerText = originalText; }, 2000);
    }

    function toggleSave(element, id) {
        element.classList.toggle('saved');
        localStorage.setItem(`saved_res_${id}`, element.classList.contains('saved'));
    }

    // 4. FILTER LOGIC
    function filterResources() {
        const term = searchInput.value.toLowerCase();
        const activeBtn = document.querySelector('.filter-btn.active');
        const filter = activeBtn ? activeBtn.getAttribute('data-filter').toLowerCase() : 'all';

        document.querySelectorAll('.resource-card').forEach(card => {
            const text = card.innerText.toLowerCase();
            const tag = card.querySelector('.card-tag')?.innerText.toLowerCase() || "";
            
            const matchesSearch = text.includes(term);
            const matchesFilter = filter === 'all' || tag.includes(filter);

            card.style.display = (matchesSearch && matchesFilter) ? 'flex' : 'none';
        });
    }

    // 5. INITIALIZATION
    document.addEventListener('DOMContentLoaded', () => {
        if (sessionStorage.getItem('strikePopupClosed')) {
            document.getElementById('strikePopup').style.display = 'none';
        }
        if (localStorage.getItem('theme') === 'dark') {
            document.body.classList.add('dark-mode');
            document.getElementById('themeIcon').innerText = "☀";
        }
        updateResistanceTicker();
        setInterval(updateResistanceTicker, 600000);
    });

    // Event Listeners
    if(searchInput) {
        searchInput.addEventListener('keyup', filterResources);
        // Mobile Scroll Fix
        searchInput.addEventListener('focus', () => {
            setTimeout(() => {
                searchInput.scrollIntoView({behavior: 'smooth', block: 'start'});
            }, 300);
        });
    }

    filterBtns.forEach(btn => {
        btn.addEventListener('click', () => {
            filterBtns.forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            filterResources();
        });
    });
</script>
</body>
</html>
